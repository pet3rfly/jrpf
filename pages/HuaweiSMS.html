<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åä¸ºçŸ­ä¿¡æ¨¡æ‹Ÿå™¨ - ç²¾è‡´ç‰ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* --- åŸºç¡€å˜é‡ï¼šè¿™é‡Œæ˜¯è°ƒèŠ‚â€œåƒä¸åƒâ€çš„å…³é”® --- */
        :root {
            --bg-color: #F1F3F5; /* æ›´çœŸå®çš„æµ…ç°èƒŒæ™¯ */
            --header-bg: #F1F3F5; 
            --my-bubble-bg: #E1EFFF; /* åä¸ºé»˜è®¤çš„æ·¡è“è‰²æ°”æ³¡ */
            --other-bubble-bg: #FFFFFF;
            --text-primary: #191919;
            --text-time: #8F9398; /* èŠå¤©æ—¶é—´æˆ³é¢œè‰² */
            --status-bar-height: 48px; 
            --nav-bar-height: 56px;
        }

        body {
            font-family: 'HarmonyOS Sans', 'Roboto', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #1e1e1e;
            margin: 0;
            display: flex;
            height: 100vh;
            color: #333;
            overflow: hidden;
        }

        /* --- å·¦ä¾§æ§åˆ¶å°æ ·å¼ (ä¿æŒå®ç”¨ä¸ºä¸») --- */
        .controls {
            width: 320px;
            background: #2b2b2b;
            color: #eee;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #444;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .controls h2 { margin-top: 0; font-size: 18px; color: #fff; }
        .controls label { display: block; font-size: 12px; color: #aaa; margin-bottom: 4px; }
        .controls input, .controls select, .controls textarea {
            background: #3a3a3a; border: 1px solid #555; color: #fff;
            width: 100%; padding: 8px; border-radius: 4px; box-sizing: border-box; margin-bottom: 10px;
        }
        .btn {
            background: #0a59f7; color: white; border: none; padding: 10px; 
            border-radius: 6px; cursor: pointer; width: 100%; font-weight: 500;
        }
        .btn:hover { background: #0046c7; }

        /* --- å³ä¾§ç”»å¸ƒåŒºåŸŸ --- */
        .preview-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* --- æ‰‹æœºæœ¬ä½“ --- */
        #phone-shell {
            width: 380px;
            height: 820px;
            background: #000;
            border-radius: 50px;
            padding: 12px; /* è¾¹æ¡†åšåº¦ */
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            position: relative;
        }

        /* å±å¹•æ˜¾ç¤ºåŒºåŸŸ */
        #screen {
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            border-radius: 40px; /* å±å¹•åœ†è§’ */
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            /* è§£å†³åœ†è§’æº¢å‡ºæˆªå›¾é—®é¢˜ */
            mask-image: radial-gradient(white, black); 
            -webkit-mask-image: -webkit-radial-gradient(white, black);
        }

        /* æŒ–å­”å±æ‘„åƒå¤´æ¨¡æ‹Ÿ */
        .camera-hole {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px; /* çµåŠ¨å²›/æŒ–å­”åŒºåŸŸå®½åº¦ */
            height: 30px;
            background: transparent; 
            z-index: 999;
            pointer-events: none;
        }
        /* è¿™é‡Œçš„ä¼ªå…ƒç´ æ¨¡æ‹Ÿä¸­é—´çš„å°é»‘ç‚¹æ‘„åƒå¤´ */
        .camera-hole::after {
            content: ''; position: absolute; top: 8px; left: 50%; transform: translateX(-50%);
            width: 12px; height: 12px; background: #000; border-radius: 50%;
        }

        /* --- çŠ¶æ€æ  (Status Bar) --- */
        .status-bar {
            height: var(--status-bar-height);
            display: flex;
            justify-content: space-between;
            align-items: flex-end; /* å›¾æ ‡é ä¸‹å¯¹é½ */
            padding: 0 24px 10px 24px; /* æ›´åŠ ç²¾ç»†çš„å†…è¾¹è· */
            font-size: 14px;
            font-weight: 600;
            color: #000;
            box-sizing: border-box;
            z-index: 100;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* çŠ¶æ€æ å›¾æ ‡é€šç”¨ */
        .icon-svg { width: 18px; height: 18px; fill: #000; }
        
        /* ç”µæ± ç»˜åˆ¶ (CSSç»˜åˆ¶æ›´æ¸…æ™°) */
        .battery-icon {
            width: 20px; height: 10px;
            border: 1.5px solid #333;
            border-radius: 3px;
            position: relative;
            padding: 1px;
            margin-left: 4px;
        }
        .battery-icon::after {
            content: ''; position: absolute; right: -3px; top: 2px;
            width: 2px; height: 4px; background: #333; border-radius: 0 1px 1px 0;
        }
        .battery-inner { height: 100%; background: #000; border-radius: 1px; }

        /* --- é¡¶éƒ¨å¯¼èˆªæ  (Action Bar) --- */
        .nav-bar {
            height: var(--nav-bar-height);
            display: flex;
            align-items: center;
            padding: 0 16px;
            background: var(--bg-color); /* åä¸ºé€šå¸¸èƒŒæ™¯è¿é€š */
            z-index: 90;
        }
        
        .nav-back { width: 24px; height: 24px; margin-right: 12px; }
        
        .nav-title-box { flex: 1; display: flex; flex-direction: column; justify-content: center; }
        .nav-name { font-size: 18px; font-weight: 500; color: #000; letter-spacing: 0.5px; }
        .nav-detail { font-size: 10px; color: #888; display: none; } /* é»˜è®¤éšè—å·ç  */
        
        .nav-menu { width: 24px; height: 24px; }

        /* --- æ¶ˆæ¯åˆ—è¡¨ --- */
        .message-list {
            flex: 1;
            padding: 10px 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 24px; /* æ¶ˆæ¯é—´è· */
        }

        /* æ—¶é—´æˆ³ */
        .time-stamp {
            text-align: center;
            font-size: 12px;
            color: var(--text-time);
            margin: 10px 0;
        }

        .msg-row {
            display: flex;
            align-items: flex-end; /* åº•éƒ¨å¯¹é½ */
            width: 100%;
        }
        
        .msg-row.sent { justify-content: flex-end; }
        
        .avatar {
            width: 36px; height: 36px;
            border-radius: 50%;
            background-color: #ddd;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            /* åä¸ºé»˜è®¤å…¶å®æ²¡æœ‰å¤´åƒï¼Œå¾®ä¿¡æ‰æœ‰ï¼Œä½†ä¸ºäº†æ¨¡æ‹Ÿå™¨é€šç”¨æ€§ä¿ç•™ï¼Œå¯éšè— */
        }
        
        .msg-row.received .avatar { margin-right: 8px; }
        .msg-row.sent .avatar { margin-left: 8px; display: none; /* é»˜è®¤éšè—è‡ªå·±å¤´åƒ */ }

        .bubble {
            max-width: 70%;
            padding: 10px 14px;
            font-size: 16px;
            line-height: 1.5;
            position: relative;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* æå…¶å¾®å¼±çš„é˜´å½±å¢åŠ è´¨æ„Ÿ */
        }

        .msg-row.received .bubble {
            background: var(--other-bubble-bg);
            color: var(--text-primary);
            border-radius: 18px 18px 18px 4px; /* å·¦ä¸‹è§’å°åœ†è§’ */
        }

        .msg-row.sent .bubble {
            background: var(--my-bubble-bg);
            color: #000;
            border-radius: 18px 18px 4px 18px; /* å³ä¸‹è§’å°åœ†è§’ */
        }

        /* --- åº•éƒ¨è¾“å…¥åŒº --- */
        .input-area {
            background: #fff;
            padding: 10px 16px 24px 16px; /* åº•éƒ¨ç•™ç™½é€‚åº”æ‰‹åŠ¿æ¡ */
            display: flex;
            align-items: center;
            border-top: 1px solid rgba(0,0,0,0.05);
        }
        
        .icon-plus { width: 26px; height: 26px; fill: #555; margin-right: 12px; }
        
        .input-box {
            flex: 1;
            background: #F2F2F2;
            height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            color: #aaa;
            font-size: 15px;
        }

        .icon-send { width: 26px; height: 26px; fill: #555; margin-left: 12px; }

        /* åº•éƒ¨Homeæ¡ */
        .home-bar {
            position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%);
            width: 120px; height: 5px; background: #000; border-radius: 3px; opacity: 0.2;
        }

        /* éšè—ç±» */
        .hidden { display: none; }

    </style>
</head>
<body>

    <div class="controls">
        <h2>ğŸ¨ å®šåˆ¶æ‚¨çš„ç•Œé¢</h2>
        
        <div class="group">
            <label>è”ç³»äººå§“å</label>
            <input type="text" id="cfg-name" value="10086" oninput="render()">
        </div>
        
        <div class="group">
            <label>çŠ¶æ€æ æ—¶é—´</label>
            <input type="text" id="cfg-time" value="16:20" oninput="render()">
        </div>

        <div class="group">
            <label>ç”µé‡ (%)</label>
            <input type="number" id="cfg-batt" value="65" oninput="render()">
        </div>

        <div class="group">
            <label>æ¶ˆæ¯æ“ä½œ</label>
            <select id="msg-type">
                <option value="received">å¯¹æ–¹å‘é€</option>
                <option value="sent">æˆ‘å‘é€</option>
                <option value="time">æ’å…¥æ—¶é—´æˆ³</option>
            </select>
            <textarea id="msg-text" rows="3" placeholder="è¾“å…¥å†…å®¹..."></textarea>
            <button class="btn" onclick="addMsg()">æ·»åŠ </button>
            <button class="btn" onclick="clearMsg()" style="background:#444; margin-top:5px;">æ¸…ç©º</button>
        </div>

        <div class="group">
            <label style="margin-top:20px">é«˜çº§å¾®è°ƒ</label>
            <label><input type="checkbox" id="cfg-show-avatar" checked onchange="toggleAvatar()"> æ˜¾ç¤ºå¯¹æ–¹å¤´åƒ</label>
            <label>å¯¹æ–¹å¤´åƒURL:</label>
            <input type="text" id="cfg-avatar-url" placeholder="å›¾ç‰‡åœ°å€..." oninput="updateAvatarUrl()">
        </div>

        <button class="btn" style="background: #28a745; margin-top: auto;" onclick="capture()">ğŸ“¸ ç”Ÿæˆé«˜æ¸…æˆªå›¾</button>
    </div>

    <div class="preview-area">
        <div id="phone-shell">
            <div id="screen">
                <div class="camera-hole"></div>

                <div class="status-bar">
                    <span id="ui-time">16:20</span>
                    <div class="status-right">
                        <div style="display:flex; align-items:flex-end; gap:1px; height:12px; width:14px;">
                            <div style="width:3px; height:40%; background:#000;"></div>
                            <div style="width:3px; height:60%; background:#000;"></div>
                            <div style="width:3px; height:80%; background:#000;"></div>
                            <div style="width:3px; height:100%; background:#000;"></div>
                        </div>
                        <span style="font-size:10px; font-weight:bold; margin-left:2px;">5G</span>
                        <span id="ui-batt-text" style="font-size:11px; margin-left:4px;">65%</span>
                        <div class="battery-icon"><div class="battery-inner" id="ui-batt-fill" style="width:65%"></div></div>
                    </div>
                </div>

                <div class="nav-bar">
                    <svg class="nav-back" viewBox="0 0 24 24"><path d="M20,11H7.83l5.59-5.59L12,4l-8,8l8,8l1.41-1.41L7.83,13H20V11z"/></svg>
                    <div class="nav-title-box">
                        <div class="nav-name" id="ui-name">10086</div>
                    </div>
                    <svg class="nav-menu" viewBox="0 0 24 24"><path d="M12,8c1.1,0,2-0.9,2-2s-0.9-2-2-2s-2,0.9-2,2S10.9,8,12,8z M12,10c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,10,12,10z M12,16c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,16,12,16z"/></svg>
                </div>

                <div class="message-list" id="ui-list">
                    <div class="time-stamp">æ˜¨å¤© 10:23</div>
                    <div class="msg-row received">
                        <div class="avatar" style="background-image: url('https://ui-avatars.com/api/?name=10086&background=random');"></div>
                        <div class="bubble">ã€æµé‡æé†’ã€‘æ‚¨å¥½ï¼Œæ‚¨æœ¬æœˆæµé‡å‰©ä½™ 20.5GBï¼Œè¯·æ”¾å¿ƒä½¿ç”¨ã€‚</div>
                    </div>
                    <div class="msg-row sent">
                        <div class="bubble">æŸ¥è¯è´¹</div>
                    </div>
                </div>

                <div class="input-area">
                    <svg class="icon-plus" viewBox="0 0 24 24"><path d="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"/></svg>
                    <div class="input-box">çŸ­ä¿¡/å½©ä¿¡</div>
                    <svg class="icon-send" viewBox="0 0 24 24"><path d="M2.01,21L23,12L2.01,3L2,10l15,2l-15,2L2.01,21z"/></svg>
                </div>

                <div class="home-bar"></div>
            </div>
        </div>
    </div>

    <script>
        // æ ¸å¿ƒæ¸²æŸ“é€»è¾‘
        function render() {
            document.getElementById('ui-name').innerText = document.getElementById('cfg-name').value;
            document.getElementById('ui-time').innerText = document.getElementById('cfg-time').value;
            
            const batt = document.getElementById('cfg-batt').value;
            document.getElementById('ui-batt-text').innerText = batt + '%';
            document.getElementById('ui-batt-fill').style.width = batt + '%';
            
            updateAvatarUrl();
        }

        let avatarUrl = "https://ui-avatars.com/api/?name=Service&background=0a59f7&color=fff";

        function updateAvatarUrl() {
            const inputUrl = document.getElementById('cfg-avatar-url').value;
            if(inputUrl) avatarUrl = inputUrl;
            
            // æ›´æ–°ç°æœ‰å¤´åƒ
            document.querySelectorAll('.msg-row.received .avatar').forEach(el => {
                el.style.backgroundImage = `url('${avatarUrl}')`;
            });
        }

        function toggleAvatar() {
            const show = document.getElementById('cfg-show-avatar').checked;
            const avatars = document.querySelectorAll('.msg-row.received .avatar');
            avatars.forEach(el => el.style.display = show ? 'block' : 'none');
        }

        function addMsg() {
            const type = document.getElementById('msg-type').value;
            const text = document.getElementById('msg-text').value;
            const list = document.getElementById('ui-list');

            if (type === 'time') {
                list.innerHTML += `<div class="time-stamp">${text || 'åˆšåˆš'}</div>`;
            } else {
                if(!text) return;
                const isReceived = type === 'received';
                const avatarStyle = document.getElementById('cfg-show-avatar').checked ? '' : 'display:none';
                
                let html = `<div class="msg-row ${type}">`;
                if(isReceived) {
                    html += `<div class="avatar" style="background-image: url('${avatarUrl}'); ${avatarStyle}"></div>`;
                }
                html += `<div class="bubble">${text}</div></div>`;
                list.innerHTML += html;
            }
            
            list.scrollTop = list.scrollHeight;
            document.getElementById('msg-text').value = '';
        }

        function clearMsg() {
            document.getElementById('ui-list').innerHTML = '';
        }

        function capture() {
            const screen = document.getElementById('screen');
            html2canvas(screen, { scale: 3, useCORS: true }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'huawei_ui_v2.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        // åˆå§‹åŒ–
        render();
    </script>
</body>
</html>